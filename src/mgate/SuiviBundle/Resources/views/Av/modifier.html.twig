{% extends "mgateSuiviBundle::layout.html.twig" %}

{% block title %}
Modifier un Avant-Projet - {{ parent() }}
{% endblock %}


{% block content_bundle %}
<style>
        textarea{
            width: 95%;
            height: 100%;
            resize:vertical;
        }
        select{
            width: 98%;
        }
        input{
            width: 95%;
            height: 100%;
        }

        .warning *{
            color: #FF6600;
            background-color: #fcf8e3 !important;
        }
    </style>


    <h2>Modifier un Avenant</h2>

    <form method="post" {{ form_enctype(form) }}>
        <input type="submit" value="Enregistrer l'Avenant"/>

        <table class="table table-bordered table-striped" style="max-width: 800px">
            <tr>
                <td style="max-width: 250px;">{{  form_label(form.objet) }}</td>
                <td>{{  form_widget(form.objet) }}</td>
            </tr>
            <tr>
                <td>{{  form_label(form.clauses) }}</td>
                <td>{{  form_widget(form.clauses) }}</td>
            </tr> 
            <tr>
                <td>{{  form_label(form.differentielDelai) }}</td>
                <td>{{  form_widget(form.differentielDelai) }}</td>
            </tr> 
        </table>
        
        
        

        <div class="row">
        {% for phase in form.phases %}
        {% set change = changes[loop.index0] | default(0) %}
                <div class="span6">
                    <table class="table table-striped table-bordered">
                        <tr>
                            <th colspan="2"><div class="btn-group"></div>       <span class="titrePhase"></span> {{  form_widget(phase.position)}}</th>
                        </tr>
                        <tr class="{{ change and change.titre ? "warning" }}">
                            <th>Titre</th>
                            <td>{{  form_widget(phase.titre)}}</td>
                        </tr>
                        <tr class="{{ change and change.objectif ? "warning" }}">
                            <th>Objectifs</th>
                            <td>{{ form_widget(phase.objectif)}}</td>
                        </tr>
                        <tr class="{{ change and change.methodo ? "warning" }}">
                            <th>Méthodologie</th>
                            <td>{{ form_widget(phase.methodo)}}</td>
                        </tr>
                        <tr class="{{ change and change.validation ? "warning" }}">
                            <th>Validation</th>
                            <td>{{ form_widget(phase.validation)}}</td>
                        </tr>
                        <tr class="{{ change and change.nbrJEH ? "warning" }}">
                            <th>Nombre JEH</th>
                            <td>{{ form_widget(phase.nbrJEH)}}</td>
                        </tr>
                        <tr class="{{ change and change.prixJEH ? "warning" }}">
                            <th>Prix JEH HT Facturé (€)</th>
                            <td>{{ form_widget(phase.prixJEH)}}</td>
                        </tr>
                        <tr class="{{ change and change.dateDebut ? "warning" }}">
                            <th>Date de Debut</th>
                            <td>{{ form_widget(phase.dateDebut)}}</td>
                        </tr>
                        <tr class="{{ change and change.delai ? "warning" }}">
                            <th>Delai (Jours)</th>
                            <td>{{ form_widget(phase.delai)}}</td>
                        </tr>
                    </table>
                </div>
        {% endfor %}

	{{ form_widget(form) }}

                <input type="submit" value="Enregistrer l'Avenant"/>      
        </form>



        <p>
            <a href="{{ path('mgateSuivi_av_voir', {'id': av.id}) }}" >Retour</a>
        </p>

{% endblock %}

{% block javascript %}
    {{ parent() }}
    {{ form_javascript(form) }}
    {% include "mgateSuiviBundle:DocType:selectOrNew.html.twig" with { known: form.knownSignataire2, knowned: form.signataire2, newed: form.newSignataire2 }%} 
        <script>
        $( document ).ready(function(){
                $('input.position').each(function(i) {
                    $(this).val( i );
                });
                $('.titrePhase').each(function(i) {
                    $(this).text( 'Phase n°'+(i+1) );
                });
            });
    
            </script>
{% endblock %}